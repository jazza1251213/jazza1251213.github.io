<!DOCTYPE html>
<html>
  <head>
    <title>SWATNEO</title>
    <script>
      let currentQuestion = 0; // 現在の問題のインデックス
      let questions = []; // 問題を保持する配列
      let answers = []; // 解答を保持する配列
      let explainations = []; // 解説を保持する配列

      // 配列用の数字をランダムに選ぶ
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
      
      // ページが読み込まれたときに問題を初期化
      window.onload = function() {
        loadQuestions(); // 問題を読み込む
        loadQuestion(currentQuestion); // 最初の問題を表示
      };

      function loadQuestions() {
        // 問題用ファイルを読み込んで配列に保存
        const QuestionFile = 'que.txt';
        fetch(QuestionFile)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.text();
          })
          .then(text => {
            questions = text.split('\n');
          });

        // 解答用ファイルを読み込んで配列に保存
        const AnswerFile = 'ans.txt';
        fetch(AnswerFile)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.text();
          })
          .then(text => {
            answers = text.split('\n');
          });

        // 解説用ファイルを読み込んで配列に保存
        const ExplainFile = 'exp.txt';
        fetch(ExplainFile)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.text();
          })
          .then(text => {
            explainations = text.split('\n');
          });
      }

      function loadQuestion(index) {
        if (index < questions.length) {
          // 問題文を設定
          document.getElementById("Question").textContent = "問題：" + questions[index];
          // 正解を設定
          correctAnswer = answers[index];
          // 解説をクリア
          document.getElementById("Explain").textContent = "";
          // ユーザーの回答をクリア
          document.getElementById("UserAnswer").value = "";
        } else {
          // すべての問題が終了した場合の処理
          document.getElementById("Question").textContent = "問題は終了しました";
          correctAnswer = "";
        }
      }

      // 入力した解答が正しいかを判断する
      function checkAnswer() {
        const UserAnswer = document.getElementById("UserAnswer").value;
        if (UserAnswer === correctAnswer) {
          document.getElementById("Result").textContent = "正解";
          // 解説を表示
          document.getElementById("Explain").textContent = "解説：" + explainations[currentQuestion];
        } else {
          document.getElementById("Result").textContent = "不正解";
        }
        // 次の問題へ進む
        currentQuestion++;
        loadQuestion(currentQuestion);
      }
    </script>
  </head>
  <body>
    <h1>SWATNEO</h1>
    <label id="Question"></label>
    <br>
    <br>
    <input type="text" id="UserAnswer" />
    <button onclick="checkAnswer()">解答する</button>
    <p id="Result"></p>
    <p id="Explain"></p>
  </body>
</html>
