<!DOCTYPE html>
<html>
  <head>
    <title>SWATNEO</title>
    <script>
      // 配列用の数字をランダムに選ぶ
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
      
      // 正解を保持する変数を設定する
      let correctAnswer = "";
      
      // ページが読み込まれたときに問題を決める
      window.onload = function() {
        const Random = getRandomInt(0, 2);
        console.log("第", Random, "問を出題");
        
        // 解答用ファイルを配列に入れる
        const AnswerFile = 'ans.txt';
        fetch(AnswerFile)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.text();
          })
          .then(text => {
            const AnswerText = text.split('\n');
            console.log("解答用テキスト　", AnswerText[Random]);
            
            // 正解を設定する
            correctAnswer = AnswerText[Random];
            
            // 問題用ファイルを配列に入れる
            const QuestionFile = 'que.txt';
            fetch(QuestionFile)
              .then(response => {
                if (!response.ok) {
                  throw new Error('Network response was not ok');
                }
                return response.text();
              })
              .then(text => {
                const QuestionText = text.split('\n');
                console.log("問題用テキスト　", QuestionText[Random]);
                
                // 問題文を設定する
                document.getElementById("Question").textContent = "問題：" + QuestionText[Random];
                
                // 解説用ファイルを配列に入れる
                const ExplainFile = 'exp.txt';
                fetch(ExplainFile)
                  .then(response => {
                    if (!response.ok) {
                      throw new Error('Network response was not ok');
                    }
                    return response.text();
                  })
                  .then(text => {
                    const ExplainText = text.split('\n');
                    console.log("解説用テキスト　", ExplainText[Random]);
                    
                    // ページ読み込み時に解説を非表示にする
                    document.getElementById("Explain").style.display = "none";
                    
                    // 解説文を設定する
                    document.getElementById("ExplainText").textContent = "解説：" + ExplainText[Random];
                  });
              });
          });
      };
      
      // 入力した解答が正しいかを判断する
      function checkAnswer() {
        const UserAnswer = document.getElementById("UserAnswer").value;
        if (UserAnswer === correctAnswer) {
          document.getElementById("Result").textContent = "正解";
          // ボタンクリック時に解説を表示する
          document.getElementById("Explain").style.display = "block";
        } else {
          document.getElementById("Result").textContent = "不正解";
        }
      }
    </script>
  </head>
  <body>
    <h1>ASWATNEO</h1>
    <label id="Question"></label>
    <br>
    <br>
    <input type="text" id="UserAnswer" />
    <button onclick="checkAnswer()">解答する</button>
    <p id="Result"></p>
    <p id="Explain" id="ExplainText"></p>
  </body>
</html>
